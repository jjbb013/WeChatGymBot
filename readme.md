# 智能健身AI助手

这是一个基于微信小程序和 AI 大语言模型（Gemini）构建的智能健身助手。它通过自然语言对话，帮助用户记录和管理他们的训练数据。

## 核心功能

- **自然语言理解**：通过调用 Gemini API，能够理解用户口语化的训练描述。
- **智能数据记录**：自动从对话中提取结构化的训练数据（动作、组数、次数、重量）。
- **本地化存储**：所有健身数据都安全地存储在用户的设备上。
- **即时反馈**：提供流畅的、带“思考中”提示的聊天交互体验。

## 项目结构

```
.
├── PROJECT.md          # 项目需求文档
├── app.js              # 小程序逻辑
├── app.json            # 小程序公共配置
├── app.wxss            # 小程序公共样式表
├── pages
│   └── chat            # 核心聊天页面
│       ├── chat.js
│       ├── chat.wxml
│       └── chat.wxss
└── utils               # 工具函数目录
    ├── gemini.js       # Gemini API 服务
    ├── parser.js       # (已废弃) 旧版解析器
    ├── storage.js      # 本地存储服务
    └── util.js         # 通用工具函数
```

## 本地开发与预览

1.  **安装依赖**：本项目无外部 npm 依赖，可直接使用。
2.  **运行本地代理**：确保您用于连接 Gemini API 的本地服务（位于 `http://127.0.0.1:1001`）已成功启动。
3.  **打开微信开发者工具**：
    *   点击“导入项目”。
    *   **项目目录**：选择本项目所在的文件夹。
    *   **AppID**：填入您自己的小程序 AppID。如果没有，可以点击“测试号”获取一个临时的 AppID。
    *   **项目名称**：自定义，例如“智能健身助手”。
4.  **关闭域名校验（重要！）**：
    *   在开发者工具的右上角，点击“详情”。
    *   在弹出的菜单中，选择“本地设置”。
    *   勾选 **“不校验合法域名、web-view（业务域名）、TLS 版本以及 HTTPS 证书”**。
    *   **此步骤是必需的**，因为它允许小程序在开发阶段访问您的本地 API 代理 (`http://127.0.0.1:1001`)。
5.  **编译与预览**：点击开发者工具主界面上的“编译”按钮，即可在模拟器中看到运行效果。

## 上传与发布

当您在本地完成测试，并准备将小程序分享给他人或发布上线时，请遵循以下步骤：

1.  **配置合法域名**：
    *   **重要**：小程序的线上版本**不能**直接访问 `http://127.0.0.1`。您需要将您的 Gemini API 代理部署到一个拥有 **HTTPS** 证书的**公网服务器**上。
    *   登录 [微信公众平台](https://mp.weixin.qq.com/)。
    *   在左侧菜单中，选择“开发”->“开发管理”->“开发设置”。
    *   找到“服务器域名”部分，点击“修改”。
    *   在 **`request` 合法域名**中，添加您部署好的公网服务器地址（例如 `https://your-api.com`）。
2.  **修改代码中的 API 地址**：
    *   打开 `utils/gemini.js` 文件。
    *   将 `API_URL` 的值从 `http://127.0.0.1:1001/...` 修改为您在公网部署的 HTTPS 地址。
3.  **上传代码**：
    *   在微信开发者工具的右上角，点击“上传”按钮。
    *   填写版本号（例如 `1.0.0`）和项目备注（例如“初版上线”）。
    *   点击“上传”。
4.  **提交审核与发布**：
    *   上传成功后，登录 [微信公众平台](https://mp.weixin.qq.com/)。
    *   在左侧菜单中，选择“管理”->“版本管理”。
    *   您会看到刚刚上传的“开发版本”。您可以将其选为“体验版”，分享给指定用户进行最后测试。
    *   确认无误后，点击“提交审核”。微信团队会对小程序的功能和内容进行审核。
    *   审核通过后，点击“发布”，您的健身助手小程序就正式上线了！
